<!DOCTYPE html>
<html>
  <head>
    <title>Title</title>
    <meta charset="utf-8">
    <style>
      @import url(https://fonts.googleapis.com/css?family=Fira+Mono|Merriweather:300|Open+Sans);

      body {
        font-family: 'Merriweather', serif;
      }
      body.remark-container {
        background: #000;
        color: #ddd;
      }
      .remark-slide-scaler {
          transform-origin: top-left;
          -moz-box-shadow: 0 0 30px #222;
          -webkit-box-shadow: 0 0 30px #222;
          box-shadow: 0 0 30px #222;
      }
      .remark-slide-content {
        background: #222;
      }
      h1, h2, h3, h4 {
        font-family: 'Open Sans', sans-serif;
        font-weight: bold;
      }
      /*
      p + ul, li + li {
        margin-top: -0.66em;
      }
      */
      code {
        border-radius: 5px;
      }
      .remark-code, .remark-inline-code { font-family: 'Fira Mono', monospace; }
      .remark-code-span-highlighted {
        background-color: rgba(255, 255, 0, 0.35);
        border: 1.5px solid #BB0;
      }
      
      /* Two-column layout */
      .left-column {
        color: #888;
        width: 20%;
        height: 92%;
        float: left;
      }
      /*
      .left-column h3 {
        margin: 0.5em 0em 0em 0.5em;
        font-size: 120%;
      }
      .left-column h4 {
        margin: 0.5em 0em 0em 1.5em;
        font-size: 100%;
      }
      */
      .left-column .current {
        color: #ddd;
      }
      .right-column {
        width: 75%;
        float: right;
        /*padding-top: 1em;*/
      }
      .clear {
        clear: both;
      }
    </style>
  </head>
  <body>
    <textarea id="source" style="display: none">

class: center, middle

# Title

---

<!--- layout: true --->

# Layout

---

# Overview

1. Why a new programming language?
2. Deep-dive
3. ...

---

# Why program in Kotlin?

--

Not because it's a panacea

(TODO: Quote about failure reason being that you're doing the wrong thing.)

---

# Why program in Kotlin?

## Because it's delightful!

--

... and also

--

* cross-ecosystem

--

* powerful

--

* elegant

--

* easy to learn

--

* professional

---

# Delightful features (IMHO)

* Cross-ecosystem
* Type inference
* Types are non-nullable by default
* No checked exceptions
* Inline functions + lambdas = syntactic macros & type-safe builders
* Coroutines
* Property delegation
* Class delegation
* Co- and contra-variance, at both declaration and use sites

---

.left-column[
## Delightful features
### .current[Cross-ecosystem]
### Type inference
### Non-null types
### Inline + lambdas
### Coroutines
### Property delegation
### Class delegation
### Type variance
]
.right-column[
Apply the same language cross-platform and cross-stack

Compile to JVM, JavaScript, or native code (alpha)

Standard cross-platform libary

Easy access to other platform libraries

In future, build multi-platform modules
]

---

.left-column[
### Delightful features
]
.right-column[
# Cross-ecosystem
]
.clear[
Apply the same language cross-platform and cross-stack

Compile to JVM, JavaScript, or native code (alpha)

Standard cross-platform libary

Easy access to other platform libraries

In future, build multi-platform modules
]

---

.left-column[
### Delightful features
]
.right-column[
# Cross-ecosystem: JVM
]
.clear[
Based on JDK 7, 8, or 9

Easy to learn if you know Java

Great interop both ways

Officially supported by Google for Android

Officially supported by Spring
]

???

Can't generate JDK 9 modules, as of 1.1.3.

---

.left-column[
### Delightful features
]
.right-column[
# Cross-ecosystem: JavaScript
]
.clear[
More powerful than TypeScript or Flow

Client-side in browser

Server-side in Node.js

Define strongly-typed interfaces to JS modules

* `ts2kt` tool to _mostly_ translate from TypeScript

Build your own standard JS modules
]

???

Not a strict supserset of Flow (e.g., no union types) but does more than just provide better type info.

---

.left-column[
### Delightful features
]
.right-column[
# Cross-ecosystem: Native
]
.clear[
Alpha quality

LLVM-based

Efficient, type-safe access to C

* `cinterop` generates Kotlin wrappers from C headers

Create multi-platform libraries

Platforms: Ubuntu Linux, Raspberry Pi, iOS, MacOS, Windows

GC: Automatic ref-counting with cycle detection
]

???

https://blog.jetbrains.com/kotlin/2017/04/kotlinnative-tech-preview-kotlin-without-a-vm/

https://github.com/JetBrains/kotlin-native/blob/v0.1.0/INTEROP.md

https://blog.jetbrains.com/kotlin/2017/06/kotlinnative-v0-3-is-out/

---
.left-column[
### Delightful features
]
.right-column[
# Non-nullable types
]
.clear[
```
class Person(
        val name: String,
        var nickname: String? = null
) {

    fun sayHello() {
        val splitNick = nickname?.split(' ')
        val myName = when(splitNick?.size) {
            null -> name
            // At this point Kotlin knows splitNick is not null
            1 -> nickname ?: name
            else -> splitNick.map { it.first() }.joinToString()
        }
        println("Hello, my name is $myName")
    }
}
```
]

???
---

.left-column[
### Delightful features
]
.right-column[
# Type inference
]
.clear[
```
// size inferred as Double
var size = 10.0
fun foo1() {
    size = 11 // compile error
}

fun <T> forEach(items: Collection<T>, block: (T) -> Unit) {
    // item inferred as T
    for (item in items) block(item)
}

fun foo2() {
    // it inferred as Int
    forEach(listOf(1, 2, 3)) { print(it + 1) }
}
```
]

???

---

.left-column[
### Delightful features
]
.right-column[
# Type inference
]
.clear[
```
// Return type defaults to Unit (like void)
fun <T> maybeDo(o: T?, block: (T) -> Unit) {
    if (o != null) {
        // o inferred as T (not T?)
        block(o)
    }
}

// Shorthand for single-expression function
fun throwAnything(o: Any): Nothing = when(o) {
    is Throwable -> throw o // o inferred as Throwable
    is String -> throw Exception(o) // o inferred as String
    else -> throw Exception(o.toString())
}
```
]

???

Return type of `Nothing` implies "does not return".

.left-column[
### Delightful features
]
.right-column[
# No checked exceptions
]
.clear[
'Nuff said
]

???
---

.left-column[
### Delightful features
]
.right-column[
# Inline functions + lambdas
]
.clear[
```
inline fun <T: Closeable?> T.autoClose(block: (T) -> Unit) {
    var caught: Boolean = false
    try {
        block(this)
    } catch (e: Exception) {
        caught = true
        try { this?.close() }
        catch (e2: Exception) { e.addSuppressed(e2); throw e }
    } finally {
        if (!caught) { this?.close() }
    }
}

fun getFirstLineStartingWith(fileName: String, prefix: String): String? {
    FileReader(File("foo.txt")).autoClose {
        it.useLines { it.forEach { if (it.startsWith(prefix)) return it } }
    }
    return null
}
```
]

???

`autoClose`, `useLines`, `forEach` and the innermost block are all inlined
into `getFirstLineStartingWith`, so the `return` will return from that
function.

Keywords `noinline` and `crossinline` allow you to declare restrictions
on how function-typed arguments can be inlined.

---

.left-column[
### Delightful features
]
.right-column[
# Property delegation
]
.clear[

]

???
---

.left-column[
### Delightful features
]
.right-column[
# Class delegation
]
.clear[

]

???
---

.left-column[
### Delightful features
]
.right-column[
# Coroutines
]
.clear[

]

???
---





---

.left-column[
## Why?
### Cross-ecosystem
### .current[Powerful]
### Elegant
### Easy
### Professional
]
.right-column[
# Powerful

Multi-paradigm

* OOP
* Procedural
* Higher-order functions
* Generics

Extensible

* Extension functions
* Inline functions + lambdas = block macros & type-safe builders
* Coroutines
]

---

.left-column[
## Why?
### Cross-ecosystem
### Powerful
### .current[Elegant]
### Easy
### Professional
]
.right-column[
# Elegant

Concise

* Type inference
* Auto-generated accessors for fields
* Define fields within default constructor
* Data classes

Same concepts used in different contexts

* Properties, delegated properties, functions, and extension functions  
can be global, class-local, or function-local
* Constructors and factory methods have the same syntax
* Coroutine mechanism can be extended to  
async calls, sequence generators, channels, thread pools, etc.
]

---

.left-column[
## Why?
### Cross-ecosystem
### Powerful
### Elegant
### .current[Easy]
### Professional
]
.right-column[
# Easy

Easy to learn if you know Java, C#, or TypeScript

Principle of least surprise

Good documentation and examples

Active communities on forums, StackOverflow, Slack, etc.
]

---

.left-column[
## Why?
### Cross-ecosystem
### Powerful
### Elegant
### Easy
### .current[Professional]
]
.right-column[
# Professional

Commercially supported by creators, JetBrains

* Used internally for their products

Well supported even in free version of IntelliJ IDEA

Also integrates with Eclipse, Android Studio, Maven, Gradle

* You can even write Gradle scripts in Kotlin!

Compiler is open source (Apache licence)
]

---

.left-column[
## Delightful!
### Awesome things
### Syntactic sugar
### Nice surprises
]
.right-column[
# Professional

Commercially supported by creators, JetBrains

* Used internally for their products

Well supported even in free version of IntelliJ IDEA

Also integrates with Eclipse, Android Studio, Maven, Gradle

* You can even write Gradle scripts in Kotlin!

Compiler is open source (Apache licence)
]

---

# Code Sample

```
class MapWithDefault<K, out V>(
        private val m: MutableMap<K, V>,
        private val defaultValue: () -> V
) : Map<K, V> `by m` {
    override fun get(key: K): V? = m.getOrPut(key, defaultValue)
}
```

--

```
fun <K, V> MutableMap<K, V>.withDefaultValue(
        defaultValue: () -> V
): Map<K, V> = MapWithDefault(this, defaultValue)
```

---




    </textarea>
    <script src="https://remarkjs.com/downloads/remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create({
        ratio: '16:9',
        highlightLanguage: 'kotlin',
        highlightStyle: 'tomorrow-night-bright',
        highlightSpans: true,
      });
    </script>
  </body>
</html>